{% extends 'base.html' %}

{% block title %}ìƒí’ˆ ëª©ë¡{% endblock %}

{% block content %}
<p><a href="{% url 'product_create' %}">+ ìƒˆ ìƒí’ˆ ë“±ë¡í•˜ê¸°</a></p>
<form method="get" action="{% url 'product_list' %}">
    <select name="category">
    <option value="">ëª¨ë“  ì¹´í…Œê³ ë¦¬</option>
    {% for category in categories %}
      <option value="{{ category.id }}" {% if category.id|stringformat:"s" == selected_category %}selected{% endif %}>
        {{ category.name }}
      </option>
    {% endfor %}
  </select>
    <input type="text" name="q" placeholder="ìƒí’ˆëª…ì„ ê²€ìƒ‰í•˜ì„¸ìš”" value="{{ request.GET.q }}">
    <button type="submit">ê²€ìƒ‰</button>
</form>
{% if request.GET.q %}
    <p><strong>"{{ request.GET.q }}"</strong>ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ì…ë‹ˆë‹¤.</p>
{% endif %}

<h1>ìƒí’ˆ ëª©ë¡</h1>
<ul>
    {% for product in products %}
      <li>
        <a href="{% url 'product_detail' product.pk %}">
          {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:100px; height:auto;">
          {% endif %}
          {{ product.name }} - {{ product.price }}ì›
          <a href="{% url 'add_to_cart' product.id %}">ğŸ›’ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸°</a>
        </a>
      </li>
    {% empty %}
      <li>ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤ ë°©ê°€ë°©ê°€.</li>
    {% endfor %}
</ul>
{% endblock %}
